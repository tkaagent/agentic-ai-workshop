system {
    host-name pe1;
    root-authentication {
        encrypted-password "$6$lB5c6$Zeud8c6IhCTE6hnZxXBl3ZMZTC2hOx9pxxYUWTHKW1oC32SATWLMH2EXarxWS5k685qMggUfFur1lq.o4p4cg1"; ## SECRET-DATA
    }
    login {
        user claude {
            uid 1001;
            class super-user;
            authentication {
                ssh-rsa "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8GvwANwot/1lhpoM3ILOfgXwkVVPHLlpL8BZUCLdAKaLjMX7q6HM9a3TY/MnkNWtaAtl9VolN3eF6C/s1nKoqU3PX8n64ex2sIVJUyZ6p5HELB0fpr2Q89SwA7L9YBsaqmCtCIS0NOQ+/SEf6FgY5aEbDbrTvIKcgqTV1e86lHt4fKPDCaYKR5I1eDDISd3IenkrQsdG/CoBPqXbXN3C08uFRL+Vvyt6f/LX7KRE4KrhMNLC1N5cVKL/icv8SMAB89XhsqF2G7rqaZLYritroatT5BLrUbadinhWKB1Qp6jkmF2fVydVMZLWtNORAXfI7LKyA/ECso8jUKByPImGKdod6kG9OZafxgbybRzBdD7q7gjAp4JVW/26Btk+X2+XsyzhL5NHwFhDjaAreOnYokOwxly7g4LsM4ru+RbogBH2BZ2RmjKIaXODu/vyuiAhIz1gAnS1ZWPSQoWkGQ/Jz9JvQ7SVrfbBgRZbAaW/O+GPa2S7GCLyQgQkADx7yHls= jizquierdo@jizquierdo-mbp"; ## SECRET-DATA
            }
        }
    }
    services {
        netconf {
            ssh;
        }
        ssh {
            root-login allow;
        }
    }
    syslog {
        archive {
            size 10m;
            files 10;
        }
        file messages {
            any notice;
            authorization info;
            interactive-commands any;
        }
        console {
            any emergency;
        }
    }
}
interfaces {
    eth1 {
        description "Connection to CE1";
        unit 0 {
            family inet {
                address 10.10.10.2/24;
            }
        }
    }
    eth2 {
        description "Connection to P";
        unit 0 {
            family inet {
                address 10.20.20.2/24;
            }
            family mpls;
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.2.2.2/32;
            }
            family iso {
                address 49.0001.0100.1001.0001.00;
            }
        }
    }
}
policy-options {
    policy-statement EXPORT_LO {
        term 10 {
            from {
                route-filter 10.2.2.2/32 exact;
            }
            then accept;
        }
    }
    policy-statement NH_SELF {
        term 10 {
            then {
                next-hop self;
            }
        }
    }
}
routing-instances {
    vrfblue {
        instance-type vrf;
        routing-options {
            static {
                route 10.1.1.1/32 next-hop 10.10.10.1;
            }
        }
        interface eth1;
        route-distinguisher 10.2.2.2:100;
        vrf-target target:100:100;
    }
}
routing-options {
    rib mpls.0;
    router-id 10.2.2.2;
}
protocols {
    bgp {
        group underlay {
            type external;
            family inet {
                unicast;
            }
            export EXPORT_LO;
            neighbor 10.20.20.3 {
                family inet {
                    labeled-unicast {
                        resolve-vpn;
                    }
                }
                peer-as 65002;
                local-as 65001;
            }
        }
        group VPN {
            type internal;
            local-address 10.2.2.2;
            family inet-vpn {
                unicast;
            }
            local-as 65005;
            neighbor 10.4.4.4 {
                family inet-vpn {
                    unicast;
                }
            }
        }
    }
    mpls {
        interface all;
    }
    isis {
        interface all {
            point-to-point;
        }
        interface eth0 {
            disable;
        }
        interface lo0.0;
        level 1 wide-metrics-only;
        level 2 wide-metrics-only;
    }
}
